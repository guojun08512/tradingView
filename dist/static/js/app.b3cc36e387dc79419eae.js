webpackJsonp([1],{0:function(e,t,n){n("j1ja"),e.exports=n("NHnr")},"3gPd":function(e,t){},DaIt:function(e,t,n){e.exports=n.p+"static/img/wx2.a8d9bcd.jpeg"},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s=n("zL8q"),i=n.n(s),o=(n("tvR6"),n("mtWM")),r=n.n(o),l=n("//Fk"),c=n.n(l),u=n("mvHQ"),f=n.n(u),h=n("Zrlr"),d=n.n(h),v=n("wxAW"),p=n.n(v),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://39.105.138.26:8001/heartbeat",n=arguments[1];d()(this,e),this.heartBeatTimer=null,this.options=n,this.messageMap={},this.connState=0,this.socket=null,this.url=t}return p()(e,[{key:"doOpen",value:function(){var e=this;if(!this.connState){this.connState=1,this.afterOpenEmit=[];var t=new(window.WebSocket||window.MozWebSocket)(this.url);t.binaryType="arraybuffer",t.onopen=function(t){return e.onOpen(t)},t.onclose=function(t){return e.onClose(t)},t.onmessage=function(t){return e.onMessage(t.data)},t.onerror=function(t){return e.onError(t)},this.socket=t}}},{key:"onOpen",value:function(e){this.connState=2,this.heartBeatTimer=setInterval(this.checkHeartbeat.bind(this),2e4),this.onReceiver({Event:"open"})}},{key:"checkOpen",value:function(){return 2===this.connState}},{key:"onClose",value:function(){this.connState=0,this.connState&&this.onReceiver({Event:"close"})}},{key:"send",value:function(e){this.socket.send(f()(e))}},{key:"emit",value:function(e){var t=this;return new c.a(function(n){t.socket.send(f()(e)),t.on("message",function(e){n(e)})})}},{key:"onMessage",value:function(e){try{var t=JSON.parse(e);this.onReceiver({Event:"message",Data:t})}catch(e){console.error(" >> Data parsing error:",e)}}},{key:"checkHeartbeat",value:function(){var e={cmd:"ping",args:[Date.parse(new Date)]};this.send(e)}},{key:"onError",value:function(e){}},{key:"onReceiver",value:function(e){var t=this.messageMap[e.Event];t&&t(e.Data)}},{key:"on",value:function(e,t){this.messageMap[e]=t}},{key:"doClose",value:function(){this.socket.close()}},{key:"destroy",value:function(){this.heartBeatTimer&&(clearInterval(this.heartBeatTimer),this.heartBeatTimer=null),this.doClose(),this.messageMap={},this.connState=0,this.socket=null}}]),e}(),g={data:function(){return{socket:new m,interval:null,lastTime:null,isLoading:!0,infos:[],count:0,pageCount:0,curPage:1,titleList:["中国股市","中国期货","国际外汇","数字货币","国际股市"],createTitle:[]}},mounted:function(){var e=this;this.$set(this.infos,"e",0),this.$api.get("http://39.105.138.26:8000/v1/stock/alldata").then(function(t){e.infos=t.data.data.data,e.$nextTick(function(){e.fun()})})},created:function(){var e=this;this.tips(),this.socket.doOpen(),this.socket.on("message",this.onMessage),this.$nextTick(function(){e.fun()})},methods:{onMessage:function(e){var t=this;if("data"===e.cmd){var n=JSON.parse(e.args);this.infos=n,this.$nextTick(function(){t.fun()})}},handleHistory:function(e,t){console.log("ttt",e,t)},tips:function(){var e=navigator.userAgent.toLowerCase();/.*(ie)\/([\w.]+).*/.test(e)&&this.$message("您的浏览器版本太低，请更换使用浏览器，例如：chrome ...")},fun:function(){for(var e=document.getElementsByTagName("tbody")[0],t=(document.querySelectorAll(".title"),this.titleList),n=0;n<e.getElementsByTagName("tr").length;n++){var a=document.createElement("div");a.className="title",0==n&&this.createTitle[0]!==t[0]&&(a.innerText=t[0],e.getElementsByTagName("tr")[n].before(a),this.createTitle[0]=t[0]),8==n&&this.createTitle[1]!==t[1]&&(a.innerText=t[1],e.getElementsByTagName("tr")[n].before(a),this.createTitle[1]=t[1]),15==n&&this.createTitle[2]!==t[2]&&(a.innerText=t[2],e.getElementsByTagName("tr")[n].before(a),this.createTitle[2]=t[2]),24==n&&this.createTitle[3]!==t[3]&&(a.innerText=t[3],e.getElementsByTagName("tr")[n].before(a),this.createTitle[3]=t[3]),25==n&&this.createTitle[4]!==t[4]&&(a.innerText=t[4],e.getElementsByTagName("tr")[n].before(a),this.createTitle[4]=t[4])}}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-modal"},[n("div",{staticClass:"content"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.infos,border:""}},[n("el-table-column",{attrs:{width:"80",label:"序号",prop:"id"}}),e._v(" "),n("el-table-column",{attrs:{width:"90",label:"名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最新"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.lasted?t.row.lasted:"-")+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"成交量",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.deal?t.row.deal:"-")+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"120",label:"涨幅"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.amount?t.row.amount:"-")+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"开盘"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.open?t.row.open:"-")+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最高"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.highest?t.row.highest:"-")+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最低"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.lowest?t.row.lowest:"-")+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleHistory(t.$index,t.row)}}},[e._v("下载历史数据")])]}}])})],1)],1)])},staticRenderFns:[]},b={data:function(){return{imgUrl1:n("crC6"),imgUrl2:n("DaIt")}},components:{Main:n("VU/8")(g,_,!1,null,null,null).exports}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-modal"},[n("el-container",[n("el-header",[e._v("猎数中国")]),e._v(" "),n("el-main",[n("Main")],1),e._v(" "),n("el-footer",[n("el-image",{staticStyle:{width:"150px",height:"150px"},attrs:{src:e.imgUrl1}}),e._v(" "),n("el-image",{staticStyle:{width:"150px",height:"150px"},attrs:{src:e.imgUrl2}}),e._v(" "),n("p",[e._v("联系方式 QQ: 3072737180")])],1)],1)],1)},staticRenderFns:[]};var k={name:"App",components:{TradeView:n("VU/8")(b,y,!1,function(e){n("3gPd")},"data-v-35b21572",null).exports}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("trade-view",{ref:"trade"})],1)},staticRenderFns:[]};var T=n("VU/8")(k,w,!1,function(e){n("V+Gc")},null,null).exports;a.default.config.productionTip=!1,a.default.use(i.a),a.default.prototype.$api=r.a,new a.default({el:"#app",components:{App:T},template:"<App/>"})},"V+Gc":function(e,t){},crC6:function(e,t,n){e.exports=n.p+"static/img/wx1.8bfe0b4.jpeg"},tvR6:function(e,t){}},[0]);
//# sourceMappingURL=app.b3cc36e387dc79419eae.js.map